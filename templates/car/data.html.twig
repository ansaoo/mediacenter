{% extends 'base.html.twig' %}

{% block title_page %}Voiture | Data{% endblock %}

{% block stylesheets %}
    <link href="{{ asset('css/plugins/dataTables/datatables.min.css') }}" rel="stylesheet">
    <!-- Morris -->
    <link href="{{ asset('css/plugins/morris/morris-0.4.3.min.css') }}" rel="stylesheet">

{% endblock %}

{% block page_heading %}
    <div class="col-lg-10">
        <h2>Data</h2>
        <ol class="breadcrumb">
            <li>
                <a href="#">Home</a>
            </li>
            <li>
                <a>Outils</a>
            </li>
            <li>
                <a>Voiture</a>
            </li>
            <li class="active">
                <strong>Data</strong>
            </li>
        </ol>
    </div>
    <div class="col-lg-2">

    </div>
{% endblock page_heading %}

{% block body %}
    <div class="row">
        <div class="col-lg-12">
            <div class="ibox float-e-margins">

                <div class="ibox-content">
                    <div class="sk-spinner sk-spinner-wave">
                        <div class="sk-rect1"></div>
                        <div class="sk-rect2"></div>
                        <div class="sk-rect3"></div>
                        <div class="sk-rect4"></div>
                        <div class="sk-rect5"></div>
                    </div>
                    <div class="table-responsive" style="width: 100%">
                        <table class="table table-striped table-bordered table-hover fuel">
                        </table>
                    </div>
                    <div class="table-responsive" style="width: 100%">
                        <table class="table table-striped table-bordered table-hover maintains">
                        </table>
                    </div>
                </div>
            </div>
        </div>
    </div>
{% endblock %}


{% block javascripts %}
    <script src="{{ asset('js/plugins/dataTables/datatables.min.js') }}"></script>
    <!-- Morris -->
    <script src="{{ asset('js/plugins/morris/raphael-2.1.0.min.js') }}"></script>
    <script src="{{ asset('js/plugins/morris/morris.js') }}"></script>
    <script>
        var languageTrans = {
            "decimal":        "{{ 'dt.decimal'|trans({},'datatable') }}",
            "emptyTable":     "{{ 'dt.emptyTable'|trans({},'datatable') }}",
            "info":           "{{ 'dt.info'|trans({},'datatable') }}",
            "infoEmpty":      "{{ 'dt.infoEmpty'|trans({},'datatable') }}",
            "infoFiltered":   "{{ 'dt.infoFiltered'|trans({},'datatable') }}",
            "infoPostFix":    "{{ 'dt.infoPostFix'|trans({},'datatable') }}",
            "thousands":      "{{ 'dt.thousands'|trans({},'datatable') }}",
            "lengthMenu":     "{{ 'dt.lengthMenu'|trans({},'datatable') }}",
            "loadingRecords": "{{ 'dt.loadingRecords'|trans({},'datatable') }}",
            "processing":     "{{ 'dt.processing'|trans({},'datatable') }}",
            "search":         "{{ 'dt.search'|trans({},'datatable') }}",
            "zeroRecords":    "{{ 'dt.zeroRecords'|trans({},'datatable') }}",
            "paginate": {
                "first":      "{{ 'dt.paginate.first'|trans({},'datatable') }}",
                "last":       "{{ 'dt.paginate.last'|trans({},'datatable') }}",
                "next":       "{{ 'dt.paginate.next'|trans({},'datatable') }}",
                "previous":   "{{ 'dt.paginate.previous'|trans({},'datatable') }}"
            },
            "aria": {
                "sortAscending":  "{{ 'dt.aria.sortAscending'|trans({},'datatable') }}",
                "sortDescending": "{{ 'dt.aria.sortDescending'|trans({},'datatable') }}"
            }
        };

        $(document).ready(function () {

            $('.fuel').DataTable({
                ajax: {
                    url: '{{ api_url }}/api.php/elastic/data/car/fuel',
                    dataSrc: '',
                    error: function (xhr, error, thrown) {
                        toastr.error('Fail');
                        $('.dataTables_empty').text('Error occurred');
                    }
                },
//            buttons: [],
                columns: [
                    { data: '_source.eventDate', title: 'Date', defaultContent: '' },
                    { data: '_source.voiture', title: 'Voiture', defaultContent: '' },
                    { data: '_source.compteur', title: 'Compteur', defaultContent: '' },
                    { data: '_source.kilometre', title: 'Kilometres', defaultContent: '' },
                    { data: '_source.litre', title: 'Litres', defaultContent: '' },
                    { data: '_source.lieu', title: 'Lieu', defaultContent: '' }
                ],
                dom: '<"html5buttons"B>lTfgitp',
                language: languageTrans,
                order: [[ 0, "desc" ]]
            });

            $('.maintains').DataTable({
                ajax: {
                    url: '{{ api_url }}/api.php/elastic/data/car/maintains',
                    dataSrc: '',
                    error: function (xhr, error, thrown) {
                        toastr.error('Fail');
                        $('.dataTables_empty').text('Error occurred');
                    }
                },
//            buttons: [],
                columns: [
                    { data: '_source.eventDate', title: 'Date', defaultContent: '' },
                    { data: '_source.voiture', title: 'Voiture', defaultContent: '' },
                    { data: '_source.compteur', title: 'Compteur', defaultContent: '' },
                    { data: '_source.libelle', title: 'Libell√©', defaultContent: '' },
                    { data: '_source.garage', title: 'Garage', defaultContent: '' },
                    { data: '_source.lieu', title: 'Lieu', defaultContent: '' },
                    { data: '_source.prix', title: 'Prix', defaultContent: '' }
                ],
                dom: '<"html5buttons"B>lTfgitp',
                language: languageTrans,
                order: [[ 0, "desc" ]]
            });
        })

    </script>
{% endblock javascripts %}